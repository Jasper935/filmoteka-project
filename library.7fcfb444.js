function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},a={},s=n.parcelRequired7c6;null==s&&((s=function(t){if(t in i)return i[t].exports;if(t in a){var e=a[t];delete a[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){a[t]=e},n.parcelRequired7c6=s),s.register("kyEFX",(function(e,n){var i,a;t(e.exports,"register",(function(){return i}),(function(t){return i=t})),t(e.exports,"resolve",(function(){return a}),(function(t){return a=t}));var s={};i=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)s[e[n]]=t[e[n]]},a=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("kyEFX").register(JSON.parse('{"bHX8u":"library.7fcfb444.js","9v6fF":"symbol-defs.ce986458.svg","jVFD5":"library.4a007617.js"}'));var o=s("9o3Er");o=s("9o3Er");const l=document.querySelector(".pagination__list"),r=document.querySelector(".pagination"),c=document.querySelector(".pagination__btn-prev"),d=document.querySelector(".pagination__btn-next");let u,g,p=Number(JSON.parse(localStorage.getItem("pageLib")));function _(t){localStorage.setItem("pageLib",JSON.stringify(t)),p=Number(JSON.parse(localStorage.getItem("pageLib")))}function m(t){g=JSON.parse(localStorage.getItem(`${t}`)),u=Math.ceil(g.length/20),console.log("~ currentPage",p),p||_(1),p>u&&_(u);const e=20*(p-1);(0,o.markUpForLibrary)(g.slice(e,e+20)),b()}function b(){let t="";if(p>=1&&(t+='<li class="pagination__item">1</li>'),2===p&&(t+='<li class="pagination__item">2</li>'),3===p&&(t+='<li class="pagination__item">2</li><li class="pagination__item">3</li>'),4===p&&(t+='<li class="pagination__item-hidden is-hidden"><span>...</span></li><li class="pagination__item">2</li><li class="pagination__item">3</li><li class="pagination__item">4</li>'),p>4&&(t+=`<li class="pagination__item-hidden"><span>...</span></li><li class="pagination__item">${p-2}</li><li class="pagination__item">${p-1}</li><li class="pagination__item">${p}</li>`),u-p>=4&&(t+=`<li class="pagination__item">${p+1}</li><li class="pagination__item">${p+2}</li><li class="pagination__item-hidden"><span>...</span></li>`),u-p==3&&(t+=`<li class="pagination__item">${p+1}</li><li class="pagination__item">${p+2}</li><li class="pagination__item-hidden is-hidden"><span>...</span></li>`),u-p==2&&(t+=`<li class="pagination__item">${p+1}</li>`),u-p==0)return l.innerHTML=t,v(),L(),h(),void r.addEventListener("click",f);t+=`<li class="pagination__item">${u}</li>`,l.innerHTML=t,v(),L(),h(),r.addEventListener("click",f)}function f(t){"BUTTON"===t.target.nodeName&&("prev"===t.target.dataset.btn&&(_(p-1),S()),"next"===t.target.dataset.btn&&(_(p+1),S())),"LI"!==t.target.nodeName||t.target.classList.contains("pagination__item-hidden")||String(p)!==t.target.textContent&&(_(Number(t.target.textContent)),S())}function v(){l.lastElementChild.classList.add("pagination-edge"),p>3&&l.firstElementChild.classList.add("pagination-edge"),u-p<3&&l.lastElementChild.classList.remove("pagination-edge")}function L(){document.querySelectorAll(".pagination__item").forEach((t=>{t.textContent===String(p)&&t.classList.add("pagination__currentPage")}))}function h(){1===p?(c.disabled=!0,c.classList.remove("pagination__btn"),c.classList.add("pagination__btn-Ldisabled")):(c.disabled=!1,c.classList.add("pagination__btn"),c.classList.remove("pagination__btn-Ldisabled")),p===u?(d.disabled=!0,d.classList.remove("pagination__btn"),d.classList.add("pagination__btn-Rdisabled")):(d.disabled=!1,d.classList.add("pagination__btn"),d.classList.remove("pagination__btn-Rdisabled"))}function S(){r.removeEventListener("click",f);const t=20*(p-1);(0,o.markUpForLibrary)(g.slice(t,t+20)),b(),console.log("~ currentPage",p),console.log("~ totalPages",u)}function y(){r.innerHTML=""}var E;let w;E=new URL(s("kyEFX").resolve("9v6fF"),import.meta.url).toString();const k=document.querySelector(".backdrop");function O(t,n,i){if(t){document.addEventListener("click",N),document.addEventListener("keydown",q);const a=JSON.parse(localStorage.getItem("genres")),s="https://image.tmdb.org/t/p/w500";w=t;const o=`\n      <div class="modal-group">\n        <button data-modal-close class="modal-group__close-btn">\n        <object class="modal-group__close-object">\n            <svg class="modal-group__close-icon" width="28" height="28">\n              <use href="${e(E)}#icon-close-modal"></use>\n            </svg>\n          </object>\n        </button>\n        <div class="modal-group__img-wrapper">\n          <img\n            class="modal-group__img"\n            src="${t.poster_path?s+t.poster_path:"https://s1.hostingkartinok.com/uploads/images/2022/07/40ceaea2e22257d2a139ca5a0c0b8ba9.jpg"}"\n            alt="${t.original_title}"\n            width="280"\n          />\n        </div>\n        <div class="modal-group__wrapper">\n          <h2 class="modal-group__title">${t.original_title}</h2>\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="table__title">Vote / Votes</td>\n                <td class="table__text">\n                  <span class="gallery-text__rating table-text-orange">${t.vote_average}</span>\n                  /\n                  <span class="table-text-grey">${t.vote_count}</span>\n                </td>\n              </tr>\n  \n              <tr>\n                <td class="table__title">Popularity</td>\n                <td class="table__text">${t.popularity}</td>\n              </tr>\n              <tr>\n                <td class="table__title">Original Title</td>\n                <td class="table__text">${t.original_title}</td>\n              </tr>\n              <tr>\n                <td class="table__title">Genre</td>\n                <td class="table__text">${t.genre_ids.map((t=>" "+a[t]))}</td>\n              </tr>\n            </tbody>\n          </table>\n  \n          <h3 class="modal-group__about-title">About</h3>\n          <p class="modal-group__about-text">\n          ${t.overview}\n          </p>\n          <div class="modal-group__btns">\n            <button class="watched-btn delete-btn" type="submit" >${n.toUpperCase()}</button>\n            <button class="queue-btn" type="submit">${i.toUpperCase()}</button>\n          </div>\n        </div>\n      </div>`;k.innerHTML=o;document.querySelector(".modal-group__close-btn").addEventListener("click",(()=>{k.classList.add("is-hidden"),document.removeEventListener("click",N),document.removeEventListener("keydown",q)}))}}function q(t){27===t.keyCode&&k.classList.add("is-hidden")}function N(t){"DIV"===t.target.nodeName&&k.classList.add("is-hidden")}var x=s("eWCmQ");e(x).Notify.init({width:"300px",position:"top-left",closeButton:!1,cssAnimationStyle:"from-right",timeout:1e3,success:{background:"#FF6B08",svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},info:{background:"#50c184"}});const I=document.querySelector(".library__button--watched"),$=document.querySelector(".library__button--queue");let F;P();let C=[],J=[];localStorage.getItem("watched")&&(J=JSON.parse(localStorage.getItem("watched"))),localStorage.getItem("queue")&&(C=JSON.parse(localStorage.getItem("queue")));const M=document.querySelector(".gallery"),R=document.querySelector(".backdrop");let T,H;M.addEventListener("click",(function(t){if(!t.target.closest("li"))return;U=I.classList.contains("active")?"watched":"queue";let e=JSON.parse(localStorage.getItem(U));console.log("~ response",e),R.classList.remove("is-hidden");const n=t.target.closest("li").id;console.log("~ currentId",n),F=e.find((t=>String(t.id)===n)),console.log("~ elementForModal",F),I.classList.contains("active")?O(F,"REMOVE FROM LIST","add to queue"):O(F,"REMOVE FROM LIST","add to watched");T=document.querySelector(".delete-btn"),H=document.querySelector(".queue-btn"),T.addEventListener("click",j),H.addEventListener("click",A)}));let U="";function j(){I.classList.contains("active")?V("watched"):$.classList.contains("active")&&V("queue")}function A(){if($.classList.contains("active")){let t=J.filter((t=>t.id!==F.id));J=t,J.push(F),localStorage.setItem("watched",JSON.stringify(J)),H.setAttribute("disabled",!0),H.classList.add("inactive")}else if(I.classList.contains("active")){let t=C.filter((t=>t.id!==F.id));C=t,C.push(F),localStorage.setItem("queue",JSON.stringify(C)),e(x).Notify.info("Movie was addeed to your queue"),H.setAttribute("disabled",!0),H.classList.add("inactive")}}function V(t){if("REMOVE FROM LIST"===T.textContent){e(x).Notify.success("Film was removed"),T.classList.add("visually-hidden");let n=JSON.parse(localStorage.getItem(t)).filter((t=>t.id!==F.id));localStorage.setItem(t,JSON.stringify(n)),"watched"===t?P():"queue"===t&&B()}}function P(){I.classList.add("active"),$.classList.remove("active");const t=JSON.parse(localStorage.getItem("watched"));console.log("~ item",t),t&&t.length>0?m("watched"):(y(),(0,o.markUpForLibrary)([]))}function B(){const t=JSON.parse(localStorage.getItem("queue"));$.classList.add("active"),I.classList.remove("active"),t&&t.length>0?m("queue"):(y(),(0,o.markUpForLibrary)([]))}I.addEventListener("click",P),$.addEventListener("click",B);
//# sourceMappingURL=library.7fcfb444.js.map
