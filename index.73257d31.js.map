{"mappings":"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","sources":["src/js/api/fetchApi.js","src/js/pagination.js","src/index.js"],"sourcesContent":["export { fetchTrends, fetchByName, fetchGenres };\nconst key = 'fdee5313a0b876498560bfe4baaab806';\n\nfunction fetchByName(name, page = 1) {\n  const url = `https://api.themoviedb.org/3/search/movie?`;\n\n  return fetch(\n    `${url}api_key=${key}&language=en-US&page=${page}&include_adult=false&query=${name}`\n  )\n    .then(res => res.json())\n    .catch(err => console.log(err));\n}\n\nfunction fetchTrends(page = 1) {\n  const url = 'https://developers.themoviedb.org/3/trending/get-trending';\n\n  return fetch(\n    `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}&page=${page}&language=en-US`\n  ).then(res => res.json())\n  // .then(res=>console.log(res)).catch(err=>console.log(err))\n}\n\n// https://api.themoviedb.org/3/search/movie?${key}&query=${name}&page=1&include_adult=false\nfunction fetchGenres() {\n  return fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?language=en-US&api_key=fdee5313a0b876498560bfe4baaab806`\n  )\n    .then(res => res.json())\n    .catch(err => console.log(err));\n}\n","import { fetchTrends, fetchByName, fetchGenres } from './api/fetchApi';\nimport { markUpForGallery } from '/src/index';\nconst paginList = document.querySelector('.pagination__list');\nconst paginBlock = document.querySelector('.pagination');\nconst prevBtn = document.querySelector('.pagination__btn-prev');\nconst nextBtn = document.querySelector('.pagination__btn-next');\n\nlet currentPage;\nlet totalPages;\nlet searchName = null;\nfunction paginationMarkup(page, pages, name = null) {\n  currentPage = page;\n  totalPages = pages;\n  searchName = name;\n  paginBlock.removeEventListener('click', onClickPagination);\n  let markup = '';\n  if (currentPage >= 1) {\n    markup += `<li class=\"pagination__item\">1</li>`;\n  }\n  if (currentPage === 2) {\n    markup += '<li class=\"pagination__item\">2</li>';\n  }\n  if (currentPage === 3) {\n    markup +=\n      '<li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li>';\n  }\n  if (currentPage === 4) {\n    markup += `<li class=\"pagination__item-hidden is-hidden\"><span>...</span></li><li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li><li class=\"pagination__item\">4</li>`;\n  }\n  if (currentPage > 4) {\n    markup += `<li class=\"pagination__item-hidden\"><span>...</span></li><li class=\"pagination__item\">${\n      currentPage - 2\n    }</li><li class=\"pagination__item\">${\n      currentPage - 1\n    }</li><li class=\"pagination__item\">${currentPage}</li>`;\n  }\n  if (totalPages - currentPage >= 4) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 3) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden is-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 2) {\n    markup += `<li class=\"pagination__item\">${currentPage + 1}</li>`;\n  }\n  if (totalPages - currentPage === 0) {\n    paginList.innerHTML = markup;\n    addEdgeClass();\n    addCurrentClassBtn();\n    isEdgePage(page, pages);\n    paginBlock.addEventListener('click', onClickPagination);\n    return;\n  }\n  markup += `<li class=\"pagination__item\">${totalPages}</li>`;\n  paginList.innerHTML = markup;\n  addEdgeClass();\n  addCurrentClassBtn();\n  isEdgePage(page, pages);\n  paginBlock.addEventListener('click', onClickPagination);\n}\n\nfunction onClickPagination(evt) {\n  if (evt.target.nodeName === 'BUTTON') {\n    if (evt.target.dataset.btn === 'prev') {\n      currentPage -= 1;\n      sendRequest();\n    }\n    if (evt.target.dataset.btn === 'next') {\n      currentPage += 1;\n      sendRequest();\n    }\n  }\n  if (\n    evt.target.nodeName !== 'LI' ||\n    evt.target.classList.contains('pagination__item-hidden')\n  ) {\n    return;\n  }\n  if (String(currentPage) === evt.target.textContent) {\n    return;\n  }\n  currentPage = evt.target.textContent;\n  sendRequest();\n}\n\n// paginationMarkup();\n\nfunction addEdgeClass() {\n  paginList.lastElementChild.classList.add('pagination-edge');\n  if (currentPage > 3) {\n    paginList.firstElementChild.classList.add('pagination-edge');\n  }\n  if (totalPages - currentPage < 3) {\n    paginList.lastElementChild.classList.remove('pagination-edge');\n  }\n}\n\nfunction addCurrentClassBtn() {\n  const list = document.querySelectorAll('.pagination__item');\n  list.forEach(el => {\n    if (el.textContent === String(currentPage)) {\n      el.classList.add('pagination__currentPage');\n    }\n  });\n}\n\nfunction isEdgePage() {\n  if (currentPage === 1) {\n    prevBtn.disabled = true;\n    prevBtn.classList.remove('pagination__btn');\n    prevBtn.classList.add('pagination__btn-Ldisabled');\n  } else {\n    prevBtn.disabled = false;\n    prevBtn.classList.add('pagination__btn');\n    prevBtn.classList.remove('pagination__btn-Ldisabled');\n  }\n\n  if (currentPage === totalPages) {\n    nextBtn.disabled = true;\n    nextBtn.classList.remove('pagination__btn');\n    nextBtn.classList.add('pagination__btn-Rdisabled');\n  } else {\n    nextBtn.disabled = false;\n    nextBtn.classList.add('pagination__btn');\n    nextBtn.classList.remove('pagination__btn-Rdisabled');\n  }\n}\n\nfunction sendRequest() {\n  if (searchName === null) {\n    paginBlock.removeEventListener('click', onClickPagination);\n    fetchTrends(currentPage).then(res => {\n      markUpForGallery(res.results);\n      localStorage.setItem('response', JSON.stringify(res.results));\n      paginationMarkup(res.page, res.total_pages);\n    });\n  } else {\n    paginBlock.removeEventListener('click', onClickPagination);\n    fetchByName(searchName, currentPage).then(res => {\n      markUpForGallery(res.results);\n      localStorage.setItem('response', JSON.stringify(res.results));\n      paginationMarkup(res.page, res.total_pages, searchName);\n    });\n  }\n}\nexport { paginationMarkup };\n","import { fetchTrends, fetchByName, fetchGenres } from './js/api/fetchApi';\nimport { paginationMarkup } from './js/pagination';\nlet findErr = document.querySelector('.form-text');\n\nlet obj1 = {};\nlet forLocalStor;\nconst urlImg = 'https://image.tmdb.org/t/p/w500';\nconst galleryItem = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nfetchGenres().then(data => {\n  data.genres.map(el => {\n    obj1[el.id] = el.name;\n    localStorage.setItem('genres', JSON.stringify(obj1));\n  });\n});\n(function spin() {\n  galleryItem.innerHTML = '<div class=\"spinner-border\"></div>';\n\n  //при загрузке сразу показать спиннеор, файнали использовать.\n  fetchTrends().then(res => {\n    markUpForGallery(res.results);\n    localStorage.setItem('response', JSON.stringify(res.results));\n\n    paginationMarkup(res.page, res.total_pages);\n  });\n\n  form.addEventListener('submit', onSubmit);\n})();\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n  const query = evt.currentTarget.name.value.trim();\n  if (!query) {\n    findErr.classList.remove('visually-hidden');\n    setTimeout(() => {\n      findErr.classList.add('visually-hidden');\n    }, 3000);\n    return;\n  }\n\n  (function spin() {\n    galleryItem.innerHTML = '<div class=\"spinner-border\"></div>';\n\n    fetchByName(query)\n      .then(res => {\n        if (!res.results.length) {\n          findErr.classList.remove('visually-hidden');\n          setTimeout(() => {\n            findErr.classList.add('visually-hidden');\n          }, 3000);\n\n          evt.target.reset();\n          return;\n        }\n        localStorage.setItem('response', JSON.stringify(res.results));\n        markUpForGallery(res.results);\n\n        paginationMarkup(res.page, res.total_pages, query);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  })();\n}\n\nfunction markUpForGallery(arr) {\n  galleryItem.innerHTML = '';\n  let a = arr.reduce(\n    (acc, el) =>\n      (acc += `<li id='${el.id}' class=\"gallery__item\" >\n      \n          <img \n            class=\"gallery__img\"\n            src='${\n              el.poster_path\n                ? urlImg + el.poster_path\n                : 'https://s1.hostingkartinok.com/uploads/images/2022/07/40ceaea2e22257d2a139ca5a0c0b8ba9.jpg'\n            }'\n            alt=\"${el.original_title}\"\n            \n          />\n          <div class=\"gallery-text\">\n            <p class=\"gallery-text__title\">${el.original_title}</p>\n            <div class=\"gallery-text__info\">\n\n\n              <p class=\"gallery-text__genre\"> ${\n                el.genre_ids.map(gen => {\n                  return (gen = obj1[gen]);\n                }).length > 3\n                  ? el.genre_ids\n                      .map(gen => {\n                        return (gen = ' ' + obj1[gen]);\n                      })\n                      .slice(0, 2) + ', Other '\n                  : el.genre_ids.map(gen => {\n                      return (gen = ' ' + obj1[gen]);\n                    })\n              } | ${el.release_date.slice(0, 4)}</p>\n\n                </div>\n                </div>\n                \n                </li>`),\n\n    ``\n  );\n  galleryItem.insertAdjacentHTML('beforeend', a);\n  //<span class=\"gallery-text__rating\">${el.vote_average}</span>\n}\n\nexport { markUpForGallery };\n"],"names":["$79e81cc842297628$var$key","$79e81cc842297628$export$1458d52a14f48ec4","name","page","fetch","then","res","json","catch","err","console","log","$79e81cc842297628$export$de059b22708f79a1","$79e81cc842297628$export$e95d448b93b2cdb","$asUcn","parcelRequire","$1f0dc3b9307be026$var$findErr","document","querySelector","$1f0dc3b9307be026$var$obj1","$1f0dc3b9307be026$var$galleryItem","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$var$onSubmit","evt","preventDefault","query","currentTarget","value","trim","classList","remove","setTimeout","add","innerHTML","fetchByName","results","length","target","reset","localStorage","setItem","JSON","stringify","$1f0dc3b9307be026$export$ce6ffd2335f38ebb","$1bab9c519cfa82bc$export$a88ca8237831132f","total_pages","arr","a","reduce","acc","el","id","poster_path","original_title","genre_ids","map","gen","slice","release_date","insertAdjacentHTML","fetchGenres","data","genres","fetchTrends","addEventListener","$1bab9c519cfa82bc$var$paginList","$1bab9c519cfa82bc$var$paginBlock","$1bab9c519cfa82bc$var$prevBtn","$1bab9c519cfa82bc$var$nextBtn","$1bab9c519cfa82bc$var$currentPage","$1bab9c519cfa82bc$var$totalPages","$1bab9c519cfa82bc$var$searchName","pages","removeEventListener","$1bab9c519cfa82bc$var$onClickPagination","markup","$1bab9c519cfa82bc$var$addEdgeClass","$1bab9c519cfa82bc$var$addCurrentClassBtn","$1bab9c519cfa82bc$var$isEdgePage","nodeName","dataset","btn","$1bab9c519cfa82bc$var$sendRequest","contains","String","textContent","lastElementChild","firstElementChild","querySelectorAll","forEach","disabled"],"version":3,"file":"index.73257d31.js.map"}