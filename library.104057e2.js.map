{"mappings":"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","sources":["src/js/markUp/markUpforLibrary.js","src/js/paginationLib.js","src/js/library.js"],"sourcesContent":["const urlImg = 'https://image.tmdb.org/t/p/w500';\nlet obj1 = JSON.parse(localStorage.getItem('genres'));\nconst gallery = document.querySelector('.gallery');\n\nexport function markUpForLibrary(arr) {\n  if (arr.length===0) {\n    gallery.innerHTML =''\n  }\n  let markUp = arr.reduce(\n    (acc, el) =>\n      (acc += `<li id=\"${el.id}\" class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"#\">\n          <img\n            class=\"gallery__img\"\n            src='${urlImg}${el.poster_path}'\n            alt=\"\"\n            width = '280'\n          />\n          <div class=\"gallery-text\">\n            <p class=\"gallery-text__title\">${el.original_title}</p>\n            <div class=\"gallery-text__info\">\n              <p class=\"gallery-text__genre\"> ${\n                el.genre_ids.map(gen => {\n                  return (gen = obj1[gen]);\n                }).length > 3\n                  ? el.genre_ids\n                      .map(gen => {\n                        return (gen = ' ' + obj1[gen]);\n                      })\n                      .slice(0, 2) + ', Other '\n                  : el.genre_ids.map(gen => {\n                      return (gen = ' ' + obj1[gen]);\n                    })\n              } | ${el.release_date.slice(0, 4)}</p>\n        <span class=\"gallery-text__rating\">${el.vote_average}</span>\n            </div>\n          </div>\n        </a>\n      </li>`),\n    ''\n  );\n  gallery.innerHTML = markUp;\n}\n","import { markUpForLibrary } from './markUp/markUpforLibrary';\nconst paginList = document.querySelector('.pagination__list');\nconst paginBlock = document.querySelector('.pagination');\nconst prevBtn = document.querySelector('.pagination__btn-prev');\nconst nextBtn = document.querySelector('.pagination__btn-next');\n\nlet currentPage;\nlet totalPages;\nlet arrLib;\nfunction firstPaginationCall(arr) {\n  arrLib = JSON.parse(localStorage.getItem(`${arr}`));\n  currentPage = 1;\n  totalPages = Math.ceil(arrLib.length / 20);\n  markUpForLibrary(arrLib.slice(0, 20));\n  paginationMarkupLib();\n}\nfunction paginationMarkupLib() {\n  //   paginBlock.removeEventListener('click', onClickPagination);\n  let markup = '';\n  if (currentPage >= 1) {\n    markup += `<li class=\"pagination__item\">1</li>`;\n  }\n  if (currentPage === 2) {\n    markup += '<li class=\"pagination__item\">2</li>';\n  }\n  if (currentPage === 3) {\n    markup +=\n      '<li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li>';\n  }\n  if (currentPage === 4) {\n    markup += `<li class=\"pagination__item-hidden is-hidden\"><span>...</span></li><li class=\"pagination__item\">2</li><li class=\"pagination__item\">3</li><li class=\"pagination__item\">4</li>`;\n  }\n  if (currentPage > 4) {\n    markup += `<li class=\"pagination__item-hidden\"><span>...</span></li><li class=\"pagination__item\">${\n      currentPage - 2\n    }</li><li class=\"pagination__item\">${\n      currentPage - 1\n    }</li><li class=\"pagination__item\">${currentPage}</li>`;\n  }\n  if (totalPages - currentPage >= 4) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 3) {\n    markup += `<li class=\"pagination__item\">${\n      currentPage + 1\n    }</li><li class=\"pagination__item\">${\n      currentPage + 2\n    }</li><li class=\"pagination__item-hidden is-hidden\"><span>...</span></li>`;\n  }\n  if (totalPages - currentPage === 2) {\n    markup += `<li class=\"pagination__item\">${currentPage + 1}</li>`;\n  }\n  if (totalPages - currentPage === 0) {\n    paginList.innerHTML = markup;\n    addEdgeClass();\n    addCurrentClassBtn();\n    isEdgePage();\n    paginBlock.addEventListener('click', onClickPagination);\n    return;\n  }\n  markup += `<li class=\"pagination__item\">${totalPages}</li>`;\n  paginList.innerHTML = markup;\n  addEdgeClass();\n  addCurrentClassBtn();\n  isEdgePage();\n  paginBlock.addEventListener('click', onClickPagination);\n}\n\nfunction onClickPagination(evt) {\n  if (evt.target.nodeName === 'BUTTON') {\n    if (evt.target.dataset.btn === 'prev') {\n      currentPage -= 1;\n      sendRequest();\n    }\n    if (evt.target.dataset.btn === 'next') {\n      currentPage += 1;\n      sendRequest();\n    }\n  }\n  if (\n    evt.target.nodeName !== 'LI' ||\n    evt.target.classList.contains('pagination__item-hidden')\n  ) {\n    return;\n  }\n  if (String(currentPage) === evt.target.textContent) {\n    return;\n  }\n  currentPage = Number(evt.target.textContent);\n  sendRequest();\n}\n\n// paginationMarkup();\n\nfunction addEdgeClass() {\n  paginList.lastElementChild.classList.add('pagination-edge');\n  if (currentPage > 3) {\n    paginList.firstElementChild.classList.add('pagination-edge');\n  }\n  if (totalPages - currentPage < 3) {\n    paginList.lastElementChild.classList.remove('pagination-edge');\n  }\n}\n\nfunction addCurrentClassBtn() {\n  const list = document.querySelectorAll('.pagination__item');\n  list.forEach(el => {\n    if (el.textContent === String(currentPage)) {\n      el.classList.add('pagination__currentPage');\n    }\n  });\n}\n\nfunction isEdgePage() {\n  if (currentPage === 1) {\n    prevBtn.disabled = true;\n    prevBtn.classList.remove('pagination__btn');\n    prevBtn.classList.add('pagination__btn-Ldisabled');\n  } else {\n    prevBtn.disabled = false;\n    prevBtn.classList.add('pagination__btn');\n    prevBtn.classList.remove('pagination__btn-Ldisabled');\n  }\n\n  if (currentPage === totalPages) {\n    nextBtn.disabled = true;\n    nextBtn.classList.remove('pagination__btn');\n    nextBtn.classList.add('pagination__btn-Rdisabled');\n  } else {\n    nextBtn.disabled = false;\n    nextBtn.classList.add('pagination__btn');\n    nextBtn.classList.remove('pagination__btn-Rdisabled');\n  }\n}\n\nfunction sendRequest() {\n  paginBlock.removeEventListener('click', onClickPagination);\n  const indexOfArrLib = (currentPage - 1) * 20;\n  markUpForLibrary(arrLib.slice(indexOfArrLib, indexOfArrLib + 20));\n\n  paginationMarkupLib();\n  console.log('~ currentPage', currentPage);\n  console.log('~ totalPages', totalPages);\n}\nexport { paginationMarkupLib, firstPaginationCall };\n","import { markUpForLibrary } from './markUp/markUpforLibrary';\nimport { firstPaginationCall } from './paginationLib';\n\nconst watched = document.querySelector('.library__button--watched');\nconst queue = document.querySelector('.library__button--queue');\n\nonClickWatched()\n\n\nwatched.addEventListener('click', onClickWatched);\nqueue.addEventListener('click', onClickQueue);\n\nfunction onClickWatched() {\n  const item = JSON.parse(localStorage.getItem('watched'));\n  if (item) {\n    console.log(item);\n  markUpForLibrary(item)\n  firstPaginationCall('watched');\n  } else {\n    markUpForLibrary([])\n  }\n  \n}\n\n\n\nfunction onClickQueue() {\n  const item = JSON.parse(localStorage.getItem('queue'));\n  if (item) {\n    \n  markUpForLibrary(item)\n  firstPaginationCall('queue');\n  } else {\n    markUpForLibrary([])\n  }\n  \n  \n}\n"],"names":["$6d593004c96b26f0$var$obj1","JSON","parse","localStorage","getItem","$6d593004c96b26f0$var$gallery","document","querySelector","$6d593004c96b26f0$export$5cc3d4baa48a7a76","arr","length","innerHTML","markUp","reduce","acc","el","id","poster_path","original_title","genre_ids","map","gen","slice","release_date","vote_average","$2395ae72a973a3ea$var$paginList","$2395ae72a973a3ea$var$paginBlock","$2395ae72a973a3ea$var$prevBtn","$2395ae72a973a3ea$var$nextBtn","$2395ae72a973a3ea$var$currentPage","$2395ae72a973a3ea$var$totalPages","$2395ae72a973a3ea$var$arrLib","$2395ae72a973a3ea$export$31993a1791953749","Math","ceil","$2395ae72a973a3ea$export$92a8daa6d8c6a0d4","markup","$2395ae72a973a3ea$var$addEdgeClass","$2395ae72a973a3ea$var$addCurrentClassBtn","$2395ae72a973a3ea$var$isEdgePage","addEventListener","$2395ae72a973a3ea$var$onClickPagination","evt","target","nodeName","dataset","btn","$2395ae72a973a3ea$var$sendRequest","classList","contains","String","textContent","Number","lastElementChild","add","firstElementChild","remove","querySelectorAll","forEach","disabled","removeEventListener","indexOfArrLib","console","log","$1cafa503bc57b7a0$var$watched","$1cafa503bc57b7a0$var$queue","$1cafa503bc57b7a0$var$onClickWatched","item"],"version":3,"file":"library.104057e2.js.map"}